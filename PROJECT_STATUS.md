# ğŸ“‹ è«è˜­è¿ªæ—¥æ›†å°ˆæ¡ˆé–‹ç™¼ç‹€æ…‹å ±å‘Š

**æ›´æ–°æ™‚é–“**: 2025-06-18 20:15 (Taiwan Time)  
**å°ˆæ¡ˆé€²åº¦**: 80% å®Œæˆ  
**ç‹€æ…‹**: åŠŸèƒ½å·²å¯¦ç¾ï¼Œå­˜åœ¨ API èª¿ç”¨å•é¡Œéœ€ä¿®å¾©

---

## ğŸ¯ å°ˆæ¡ˆæ¦‚è¿°

å»ºç«‹ä¸€å€‹é¡ä¼¼ Google Calendar çš„ç¤¾äº¤æ—¥æ›†æ‡‰ç”¨ï¼Œæ¡ç”¨æº«å’Œçš„è«è˜­è¿ªè‰²ç³»è¨­è¨ˆã€‚

### æ ¸å¿ƒéœ€æ±‚
- ğŸ“… æœˆè¦–åœ–æ—¥æ›†ç•Œé¢
- ğŸ¨ è«è˜­è¿ªè‰²ç³»ä¸»é¡Œï¼ˆ7ç¨®ç™‚ç™’è‰²å½©ï¼‰
- ğŸ‘¥ å¤šäººå…±äº«æ—¥æ›†åŠŸèƒ½
- ğŸ’¬ æ´»å‹•ç•™è¨€æ¿èˆ‡ç…§ç‰‡åˆ†äº«
- ğŸ” ä½¿ç”¨è€…èªè­‰ç³»çµ±
- ğŸ“± éŸ¿æ‡‰å¼è¨­è¨ˆ

---

## ğŸ—ï¸ æŠ€è¡“æ¶æ§‹

### å‰ç«¯æŠ€è¡“æ£§
- **React 18** + TypeScript
- **Tailwind CSS** - å®¢è£½åŒ–è«è˜­è¿ªè‰²ç³»
- **React Router v6** - è·¯ç”±ç®¡ç†
- **React Query** - æœå‹™ç«¯ç‹€æ…‹ç®¡ç†
- **React Hook Form** + Yup - è¡¨å–®è™•ç†èˆ‡é©—è­‰
- **Framer Motion** - å‹•ç•«æ•ˆæœ
- **Axios** - API èª¿ç”¨
- **Lucide React** - åœ–æ¨™åº«

### å¾Œç«¯æŠ€è¡“æ£§
- **Node.js** + Express
- **MongoDB Atlas** - é›²ç«¯è³‡æ–™åº«
- **Mongoose** - ODM
- **JWT** - èº«ä»½é©—è­‰
- **Joi** - è³‡æ–™é©—è­‰
- **Bcrypt** - å¯†ç¢¼åŠ å¯†
- **Helmet** + CORS - å®‰å…¨è¨­å®š

### é–‹ç™¼ç’°å¢ƒ
- **WSL2** Ubuntu ç’°å¢ƒ
- **å‰ç«¯åœ°å€**: http://172.20.213.111:3000
- **å¾Œç«¯åœ°å€**: http://172.20.213.111:5000
- **è³‡æ–™åº«**: MongoDB Atlas (é€£æ¥æ­£å¸¸)

---

## âœ… å·²å¯¦ç¾åŠŸèƒ½

### 1. ä½¿ç”¨è€…èªè­‰ç³»çµ± (100% å®Œæˆ)
- âœ… è¨»å†ŠåŠŸèƒ½ - é›»å­éƒµä»¶ã€å¯†ç¢¼ã€é¡¯ç¤ºåç¨±
- âœ… ç™»å…¥åŠŸèƒ½ - JWT token é©—è­‰
- âœ… è‡ªå‹•ç™»å…¥ - localStorage æŒä¹…åŒ–
- âœ… ç™»å‡ºåŠŸèƒ½
- âœ… å€‹äººè³‡æ–™ç®¡ç†
- âœ… CORS é…ç½®æ­£ç¢º

### 2. è«è˜­è¿ªè‰²ç³»è¨­è¨ˆ (100% å®Œæˆ)
```javascript
// 7ç¨®ä¸»é¡Œè‰²å½©
{
  'morandi-sage': '#9CAF9F',      // é¼ å°¾è‰ç¶ 
  'morandi-rose': '#D4A5A5',      // ç«ç‘°ç²‰
  'morandi-lavender': '#B8A8C8',  // è–°è¡£è‰ç´«
  'morandi-peach': '#E8C4A0',     // èœœæ¡ƒæ©˜
  'morandi-blue': '#A8B8C8',      // éœ§éœ¾è—
  'morandi-cream': '#F0E6D6',     // å¥¶æ²¹è‰²
  'morandi-grey': '#C8C0B8',      // æš–ç°è‰²
}
```

### 3. æ—¥æ›†æ ¸å¿ƒåŠŸèƒ½ (95% å®Œæˆ)
- âœ… æœˆè¦–åœ–æ—¥æ›†ç•Œé¢
- âœ… æ—¥æœŸå°èˆª (å‰/å¾Œæœˆ)
- âœ… ä»Šå¤©æŒ‰éˆ•
- âœ… æ´»å‹•å‰µå»ºæ¨¡æ…‹æ¡†
- âœ… æ´»å‹•è©³æƒ…æª¢è¦–
- âœ… æ´»å‹•ç·¨è¼¯åŠŸèƒ½
- âœ… æ´»å‹•åˆªé™¤åŠŸèƒ½
- âœ… è«è˜­è¿ªè‰²å½©æ¨™ç±¤é¸æ“‡
- âœ… å…¨å¤©/æ™‚é–“æ´»å‹•æ”¯æ´
- âœ… æ´»å‹•åˆ†é¡ç³»çµ±
- âœ… éš±ç§è¨­å®š

### 4. è¡¨å–®é©—è­‰èˆ‡ç”¨æˆ¶é«”é©— (100% å®Œæˆ)
- âœ… å®Œæ•´çš„è¡¨å–®é©—è­‰ (Yup schema)
- âœ… éŒ¯èª¤æç¤ºè¨Šæ¯ä¸­æ–‡åŒ–
- âœ… è¼‰å…¥ç‹€æ…‹é¡¯ç¤º
- âœ… æˆåŠŸ/éŒ¯èª¤ Toast é€šçŸ¥
- âœ… å‹•ç•«æ•ˆæœ (Framer Motion)

---

## ğŸ—„ï¸ è³‡æ–™åº«æ¶æ§‹

### Users Collection
```javascript
{
  _id: ObjectId,
  email: String (unique),
  password: String (åŠ å¯†),
  displayName: String,
  avatar: String (URL),
  preferences: {
    notifications: { email, browser, mobile },
    theme: String,
    defaultCalendarView: String,
    timezone: String
  },
  isActive: Boolean,
  lastLogin: Date,
  createdAt: Date,
  updatedAt: Date
}
```

### Events Collection
```javascript
{
  _id: ObjectId,
  title: String (required),
  description: String,
  startDate: Date (required),
  endDate: Date (required),
  isAllDay: Boolean,
  color: String (è«è˜­è¿ªè‰²å½©),
  category: String (work|personal|friends|family|health|other),
  location: String,
  creator: ObjectId (ref: User),
  attendees: [{ user: ObjectId, status: String, addedAt: Date }],
  privacy: String (private|shared|public),
  sharedWith: [{ user: ObjectId, permissions: Object }],
  recurrence: { type, interval, endDate, occurrences },
  reminders: [String],
  isDeleted: Boolean,
  createdAt: Date,
  updatedAt: Date
}
```

### Comments Collection (å·²è¨­è¨ˆï¼Œæœªå¯¦ä½œ)
```javascript
{
  _id: ObjectId,
  event: ObjectId (ref: Event),
  author: ObjectId (ref: User),
  content: String,
  images: [{ url, publicId, caption }],
  parentComment: ObjectId (ref: Comment),
  replies: [ObjectId],
  likes: [{ user: ObjectId, likedAt: Date }],
  isEdited: Boolean,
  editedAt: Date,
  isDeleted: Boolean,
  createdAt: Date,
  updatedAt: Date
}
```

### CalendarShare Collection (å·²è¨­è¨ˆï¼Œæœªå¯¦ä½œ)
```javascript
{
  _id: ObjectId,
  owner: ObjectId (ref: User),
  sharedWith: ObjectId (ref: User),
  permissions: {
    canViewEvents: Boolean,
    canCreateEvents: Boolean,
    canEditEvents: Boolean,
    canDeleteEvents: Boolean,
    canComment: Boolean,
    canInviteOthers: Boolean
  },
  status: String (pending|accepted|declined),
  shareType: String (full_calendar|specific_events),
  categories: [String],
  note: String,
  expiresAt: Date,
  isActive: Boolean,
  createdAt: Date,
  updatedAt: Date
}
```

---

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
morandi-calendar/
â”œâ”€â”€ package.json                 # æ ¹ç›®éŒ„é…ç½®èˆ‡å•Ÿå‹•æŒ‡ä»¤
â”œâ”€â”€ README.md                   # å°ˆæ¡ˆèªªæ˜æ–‡ä»¶
â”œâ”€â”€ PROJECT_STATUS.md           # æ­¤ç‹€æ…‹å ±å‘Š
â”œâ”€â”€ server/                     # å¾Œç«¯ Node.js æ‡‰ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app.js             # Express ä¸»æ‡‰ç”¨
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”‚   â””â”€â”€ database.js    # MongoDB é€£æ¥é…ç½®
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â”œâ”€â”€ authController.js    # èªè­‰æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â””â”€â”€ eventController.js   # æ´»å‹•æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”‚   â””â”€â”€ auth.js        # JWT èªè­‰ä¸­ä»‹è»Ÿé«”
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”œâ”€â”€ User.js        # ä½¿ç”¨è€…æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ Event.js       # æ´»å‹•æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ Comment.js     # ç•™è¨€æ¨¡å‹
â”‚   â”‚   â”‚   â””â”€â”€ CalendarShare.js # å…±äº«æ¨¡å‹
â”‚   â”‚   â””â”€â”€ routes/
â”‚   â”‚       â”œâ”€â”€ auth.js        # èªè­‰è·¯ç”±
â”‚   â”‚       â””â”€â”€ events.js      # æ´»å‹•è·¯ç”±
â”‚   â”œâ”€â”€ .env                   # ç’°å¢ƒè®Šæ•¸
â”‚   â””â”€â”€ package.json
â””â”€â”€ client/                    # å‰ç«¯ React æ‡‰ç”¨
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ components/
    â”‚   â”‚   â”œâ”€â”€ Auth/
    â”‚   â”‚   â”‚   â”œâ”€â”€ LoginForm.tsx
    â”‚   â”‚   â”‚   â””â”€â”€ RegisterForm.tsx
    â”‚   â”‚   â”œâ”€â”€ Calendar/
    â”‚   â”‚   â”‚   â””â”€â”€ MonthView.tsx
    â”‚   â”‚   â””â”€â”€ Event/
    â”‚   â”‚       â”œâ”€â”€ EventModal.tsx       # æ–°å¢æ´»å‹•
    â”‚   â”‚       â”œâ”€â”€ EventDetailModal.tsx # æ´»å‹•è©³æƒ…
    â”‚   â”‚       â””â”€â”€ EventEditModal.tsx   # ç·¨è¼¯æ´»å‹•
    â”‚   â”œâ”€â”€ contexts/
    â”‚   â”‚   â””â”€â”€ AuthContext.tsx # èªè­‰ä¸Šä¸‹æ–‡
    â”‚   â”œâ”€â”€ pages/
    â”‚   â”‚   â”œâ”€â”€ AuthPage.tsx    # ç™»å…¥/è¨»å†Šé é¢
    â”‚   â”‚   â””â”€â”€ CalendarPage.tsx # ä¸»æ—¥æ›†é é¢
    â”‚   â”œâ”€â”€ services/
    â”‚   â”‚   â””â”€â”€ api.ts          # API èª¿ç”¨æœå‹™
    â”‚   â”œâ”€â”€ types/
    â”‚   â”‚   â””â”€â”€ index.ts        # TypeScript é¡å‹å®šç¾©
    â”‚   â”œâ”€â”€ utils/
    â”‚   â”‚   â”œâ”€â”€ colors.ts       # è«è˜­è¿ªè‰²å½©å·¥å…·
    â”‚   â”‚   â””â”€â”€ date.ts         # æ—¥æœŸè™•ç†å·¥å…·
    â”‚   â”œâ”€â”€ App.tsx
    â”‚   â”œâ”€â”€ main.tsx
    â”‚   â”œâ”€â”€ index.css           # å…¨åŸŸæ¨£å¼
    â”‚   â”œâ”€â”€ debug.ts            # é™¤éŒ¯å·¥å…·
    â”‚   â””â”€â”€ debug-api.ts        # API é™¤éŒ¯å·¥å…·
    â”œâ”€â”€ .env                    # å‰ç«¯ç’°å¢ƒè®Šæ•¸
    â”œâ”€â”€ vite.config.ts
    â”œâ”€â”€ tailwind.config.js      # Tailwind é…ç½®
    â””â”€â”€ package.json
```

---

## âš ï¸ ç•¶å‰å•é¡Œ

### ğŸš¨ ç·Šæ€¥å•é¡Œ - API èª¿ç”¨å¤±æ•—
**ç—‡ç‹€**:
- å‰ç«¯é¡¯ç¤ºã€Œå‰µå»ºæ´»å‹•å¤±æ•—ã€
- å‰ç«¯é¡¯ç¤ºã€Œè¼‰å…¥æ´»å‹•å¤±æ•—ã€
- ä½¿ç”¨è€…å¯ä»¥æ­£å¸¸ç™»å…¥

**å·²é©—è­‰**:
- âœ… å¾Œç«¯ API å®Œå…¨æ­£å¸¸ (curl æ¸¬è©¦é€šé)
- âœ… MongoDB Atlas é€£æ¥æ­£å¸¸
- âœ… JWT token ç”Ÿæˆæ­£å¸¸
- âœ… CORS è¨­å®šæ­£ç¢º

**å¯èƒ½åŸå› **:
1. å‰ç«¯ API æ””æˆªå™¨å•é¡Œ
2. Token åœ¨ localStorage ä¸­çš„å­˜å–å•é¡Œ
3. å‰ç«¯è«‹æ±‚æ ¼å¼å•é¡Œ
4. React Query é…ç½®å•é¡Œ

**å·²æ·»åŠ èª¿è©¦å·¥å…·**:
```javascript
// åœ¨ç€è¦½å™¨ Console ä¸­å¯ç”¨
window.debugAPI.testAuth()        // æ¸¬è©¦èªè­‰
window.debugAPI.testEvents()      // æ¸¬è©¦ç²å–æ´»å‹•
window.debugAPI.testCreateEvent() // æ¸¬è©¦å‰µå»ºæ´»å‹•
```

---

## ğŸ”§ æ¸¬è©¦ç”¨å¸³æˆ¶

```javascript
// å·²å»ºç«‹æ¸¬è©¦å¸³æˆ¶
{
  email: "test2@example.com",
  password: "123456",
  displayName: "æ¸¬è©¦ç”¨æˆ¶2"
}
```

---

## ğŸš€ å•Ÿå‹•æŒ‡ä»¤

### é–‹ç™¼ç’°å¢ƒå•Ÿå‹•
```bash
# å¾æ ¹ç›®éŒ„
cd /mnt/c/Users/å“²é ¤/Desktop/calender

# åŒæ™‚å•Ÿå‹•å‰å¾Œç«¯ (æ¨è–¦)
npm run dev

# æˆ–åˆ†åˆ¥å•Ÿå‹•
npm run server  # å¾Œç«¯: http://172.20.213.111:5000
npm run client  # å‰ç«¯: http://172.20.213.111:3000
```

### ä¾è³´å®‰è£
```bash
# å®‰è£æ‰€æœ‰ä¾è³´
npm run install-deps

# æˆ–åˆ†åˆ¥å®‰è£
cd server && npm install
cd ../client && npm install
```

### ç’°å¢ƒè®Šæ•¸é…ç½®
```bash
# å¾Œç«¯ .env
NODE_ENV=development
PORT=5000
MONGODB_URI=mongodb+srv://sung891220:VsMB4FghpGirjXfW@calender.qzfma0x.mongodb.net/morandi-calendar?retryWrites=true&w=majority&appName=Calender
JWT_SECRET=morandi-calendar-super-secret-key-2024
CLIENT_URL=http://172.20.213.111:3000

# å‰ç«¯ .env  
VITE_API_URL=http://172.20.213.111:5000/api
```

---

## ğŸ“‹ ä¸‹ä¸€æ­¥å·¥ä½œæ¸…å–®

### ğŸš¨ ç·Šæ€¥ (éœ€ç«‹å³ä¿®å¾©)
1. **è¨ºæ–· API èª¿ç”¨å•é¡Œ**
   - æª¢æŸ¥ç€è¦½å™¨ Console éŒ¯èª¤è¨Šæ¯
   - é©—è­‰ localStorage token æœ‰æ•ˆæ€§
   - æ¸¬è©¦ React Query é…ç½®
   - ä¿®å¾©å‰å¾Œç«¯é€šä¿¡å•é¡Œ

### ğŸ“‹ ä¸­å„ªå…ˆç´š (æ ¸å¿ƒåŠŸèƒ½æ“´å±•)
2. **å¯¦ä½œç•™è¨€åŠŸèƒ½**
   - æ´»å‹•ç•™è¨€æ¿å…ƒä»¶
   - ç…§ç‰‡ä¸Šå‚³åŠŸèƒ½ (Cloudinary)
   - ç•™è¨€å›è¦†ç³»çµ±
   - é»è®šäº’å‹•åŠŸèƒ½

3. **å®Œå–„æ´»å‹•ç®¡ç†**
   - æ‹–æ‹½ç§»å‹•æ´»å‹•
   - æ´»å‹•é‡è¤‡è¨­å®š
   - æé†’é€šçŸ¥ç³»çµ±
   - æ´»å‹•åŒ¯å‡ºåŠŸèƒ½

### ğŸ”„ ä½å„ªå…ˆç´š (é€²éšåŠŸèƒ½)
4. **å¤šäººå…±äº«æ—¥æ›†**
   - é‚€è«‹ç³»çµ±
   - æ¬Šé™ç®¡ç†
   - å…±äº«ç‹€æ…‹é¡¯ç¤º
   - å”ä½œé€šçŸ¥

5. **ç”¨æˆ¶é«”é©—å„ªåŒ–**
   - é€±è¦–åœ–èˆ‡æ—¥è¦–åœ–
   - æ·±è‰²æ¨¡å¼æ”¯æ´
   - è¡Œå‹•ç«¯ PWA
   - æœå°‹èˆ‡ç¯©é¸åŠŸèƒ½

---

## ğŸ” é™¤éŒ¯æ­¥é©Ÿ

### 1. å‰ç«¯é™¤éŒ¯
```bash
# é–‹å•Ÿç€è¦½å™¨åˆ°
http://172.20.213.111:3000

# æŒ‰ F12 é–‹å•Ÿé–‹ç™¼è€…å·¥å…·
# æª¢æŸ¥ Console æ¨™ç±¤ä¸­çš„éŒ¯èª¤è¨Šæ¯

# æ¸¬è©¦ API é€£æ¥
window.debugAPI.testAuth()
window.debugAPI.testEvents()
```

### 2. å¾Œç«¯é™¤éŒ¯
```bash
# æ¸¬è©¦å¾Œç«¯å¥åº·ç‹€æ…‹
curl http://172.20.213.111:5000/api/health

# æ¸¬è©¦ç™»å…¥ API
curl -X POST http://172.20.213.111:5000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"test2@example.com","password":"123456"}'

# ä½¿ç”¨è¿”å›çš„ token æ¸¬è©¦æ´»å‹• API
curl -X GET http://172.20.213.111:5000/api/events \
  -H "Authorization: Bearer [TOKEN]"
```

### 3. å¸¸è¦‹å•é¡Œè§£æ±º
- **é€£æ¥æ‹’çµ•**: æª¢æŸ¥æœå‹™æ˜¯å¦é‹è¡Œåœ¨æ­£ç¢ºç«¯å£
- **CORS éŒ¯èª¤**: ç¢ºèªå¾Œç«¯ CORS è¨­å®š
- **èªè­‰å¤±æ•—**: æª¢æŸ¥ JWT token æ ¼å¼å’Œæœ‰æ•ˆæœŸ
- **è³‡æ–™åº«éŒ¯èª¤**: ç¢ºèª MongoDB Atlas é€£æ¥å­—ä¸²

---

## ğŸ“ è¯çµ¡è³‡è¨Š

**å°ˆæ¡ˆä½ç½®**: `/mnt/c/Users/å“²é ¤/Desktop/calender/`  
**é–‹ç™¼ç’°å¢ƒ**: WSL2 Ubuntu  
**ç‹€æ…‹**: å¾…ä¿®å¾© API èª¿ç”¨å•é¡Œ  

---

**ğŸ’¡ é‡è¦æé†’**: å°ˆæ¡ˆåŠŸèƒ½å·²åŸºæœ¬å®Œæˆï¼Œä¸»è¦éœ€è¦è§£æ±ºå‰ç«¯ API èª¿ç”¨å•é¡Œã€‚å»ºè­°å„ªå…ˆæª¢æŸ¥ç€è¦½å™¨ Console çš„å…·é«”éŒ¯èª¤è¨Šæ¯ï¼Œç„¶å¾Œé‡å°æ€§ä¿®å¾©ã€‚

**ğŸ¯ ç›®æ¨™**: ä¿®å¾©å¾Œå³å¯é€²å…¥ç•™è¨€åŠŸèƒ½é–‹ç™¼éšæ®µï¼Œå®Œæˆå®Œæ•´çš„ç¤¾äº¤æ—¥æ›†æ‡‰ç”¨ã€‚